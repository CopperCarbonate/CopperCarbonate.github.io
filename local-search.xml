<?xml version="1.0" encoding="utf-8"?>
<search>
  
  
  
  <entry>
    <title>DTOJ 5932 题解</title>
    <link href="/2022/10/22/DTOJ%205932%20%E9%A2%98%E8%A7%A3/"/>
    <url>/2022/10/22/DTOJ%205932%20%E9%A2%98%E8%A7%A3/</url>
    
    <content type="html"><![CDATA[<h2 id="DTOJ-5932-题解"><a href="#DTOJ-5932-题解" class="headerlink" title="DTOJ 5932 题解"></a>DTOJ 5932 题解</h2><p>认识到了生成函数很好用，于是摆了一篇题解</p><h3 id="10分"><a href="#10分" class="headerlink" title="10分"></a>10分</h3><p>直接dp，$f_{i,j}$ 表示走了 $i$ 步之后，当前位置在  $j$ 的方案数</p><p>然后就有状态转移方程 $f_{i,j}&#x3D;f_{i-1,j-1}+f_{i-1,j}+f_{i-1,j+1}$</p><p>时间复杂度 $\Theta(nm)$</p><h3 id="40-50分"><a href="#40-50分" class="headerlink" title="40~50分"></a>40~50分</h3><p>相信大家都会矩阵快速幂<br>$$<br>\begin {bmatrix}<br>1 &amp; 1 &amp; 0 &amp; 0 &amp; \cdots &amp; 0\<br>1 &amp; 1 &amp; 1 &amp; 0 &amp; \cdots &amp; 0\<br>0 &amp; 1 &amp; 1 &amp; 1 &amp; \cdots &amp; 0\<br>0 &amp; 0 &amp; 1 &amp; 1 &amp; \cdots &amp; 0\<br>\vdots &amp; \vdots &amp; \vdots &amp; \vdots &amp; \ddots &amp; \vdots\<br>0 &amp; 0 &amp; 0 &amp; 0 &amp; \cdots &amp; 1<br>\end {bmatrix}<br>\begin {bmatrix}<br>f_{i-1,0} \<br>f_{i-1,1} \<br>f_{i-1,2} \<br>f_{i-1,3} \<br>\vdots  \<br>f_{i-1,n-1} \<br>\end {bmatrix}<br>&#x3D;<br>\begin{bmatrix}<br>f_{i,0} \<br>f_{i,1} \<br>f_{i,2} \<br>f_{i,3} \<br>\vdots  \<br>f_{i,n-1} \<br>\end{bmatrix}<br>$$</p><h3 id="80-90分"><a href="#80-90分" class="headerlink" title="80~90分"></a>80~90分</h3><p>相信大家都学过 Catalan 数</p><p>我们先枚举走的 $n $ 步中，有 $k$ 次是移动，$n-k$ 次是原地不动，有 $\binom{n}{k}$ 种方法</p><p>把向左移动记为 $(1,1)$，向右移动记为 $(1,-1)$，则可以表示成下图这样</p><p><img src="/%22/img/post_img/DTOJ_5932_pic1.png%22"></p><p>这边比 Catalan 数那个图多了一条线，于是我们考虑容斥，可以得到：</p><p>方案数 $&#x3D;$ 总路径数 </p><p>$-$ 越过 $y&#x3D;m$ 的路径数 $-$ 越过 $y&#x3D;0$ 的路径数 </p><p>$+$ 先越过 $y&#x3D;0$ 再越过 $y&#x3D;m$ 的路径数 $+$ 先越过 $y&#x3D;m$ 再越过$y&#x3D;0$ 的路径数 </p><p>$-$ 越过 $3$ 次的路径数 </p><p>$+$ … </p><p>所以可以把终点 $(k,0)$ 关于 $y&#x3D;0$ 和 $y&#x3D;m$ 交替对称，加上或者减去到每个点的路径数</p><p> $(k,0) \rightarrow (k,-2) \rightarrow (k,2m+4) \rightarrow (k,-2m-6) \rightarrow\dots$</p><p> $(k,0) \rightarrow (k,2m+2) \rightarrow (k,-2m-4) \rightarrow (k,4m+6) \rightarrow\dots$</p><p>于是可以写出组合式子<br>$$<br>ans&#x3D;\sum_{k&#x3D;0}^n\binom{n}{k}\left(\left(\binom{k}{k&#x2F;2}-\binom{k}{k&#x2F;2-1}+\binom{k}{k&#x2F;2+m+2}-\dots\right)+\left(\binom{k}{k&#x2F;2}-\binom{k}{k&#x2F;2-1}+\binom{k}{k&#x2F;2+m+2}-\dots\right)\right)<br>$$<br>因为最多可以越过$\frac{n}{m}$ 条线，所以时间复杂度是 $\Theta(\frac{n^2}{m})$</p><h3 id="100分"><a href="#100分" class="headerlink" title="100分"></a>100分</h3><p>可以发现dp式子可以写成卷积，于是考虑把式子改写成生成函数</p><p>$F_i(x)&#x3D;\left(\frac{1}{x}+1+x\right)F_{i-1}(x)$</p><p>则$F_n(x)&#x3D;\left(\frac{1}{x}+1+x\right)^n$</p><p>答案即为 $[x^0]F_n(x)&#x3D;[x^0]\left(\frac{1}{x}+1+x\right)^n&#x3D;[x^n]\left(1+x+x^2\right)^n$</p><p>记 $G&#x3D;1+x+x^2$  $H&#x3D;G^n$ </p><p>使用奇妙的小技巧（求导）：$H’&#x3D;nG^{n-1}G’$</p><p>同乘G得 $H’G&#x3D;nHG’$ </p><p>我们得到了一个好式子，就可以 $\Theta(n)$ 推出答案了</p><p>把 $H$ 和 $H’$ 写成展开形式： $H(x)&#x3D;\sum{h_ix^i}$   </p><p>$H’(x)&#x3D;\sum{ih_ix^i}&#x3D;\sum{(i+1)h_{i+1}x^i}$</p><p>又因为 $H’(x)(1+x+x^2)&#x3D;nH(x)(1+2x)$</p><p>求 $[x^k]$ 一项得 $<a href="(k+1)h_%7Bk+1%7D+kh_k+(k-1)h_%7Bk-1%7D">x^k</a>&#x3D;[x^k]n(h_k+2h_{k-1})$</p><p>整理得 $(k+1)h_{k+1}&#x3D;(n-k)h_k+(2n-k+1)h_{k-1}$</p><p>因为 $H&#x3D;(1+x+x^2)^n$ 所以 $h_0&#x3D;0, h_1&#x3D;n$ 就可以递推求得 $h_i$ 了呢（记得线性求逆元）</p><p>$h_i&#x3D;<a href="1+x+x%5E2">x^i</a>^n&#x3D;<a href="%5Cfrac%7B1%7D%7Bx%7D+1+x">x^{i-n}</a>^n$</p><p> 所以 $h_i$ 表示的就是 $n$ 步走到 $i-n$ 的方案数</p><p>浅浅地容斥一下就可以得到答案</p><p>时间复杂度是 $\Theta(n)$ 的</p><p>发现很好实现 我直呼好题</p>]]></content>
    
    
    
    <tags>
      
      <tag>dp</tag>
      
      <tag>组合</tag>
      
      <tag>生成函数，求导</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>DTOJ 5769 题解</title>
    <link href="/2022/10/22/DTOJ%205769%20%E9%A2%98%E8%A7%A3/"/>
    <url>/2022/10/22/DTOJ%205769%20%E9%A2%98%E8%A7%A3/</url>
    
    <content type="html"><![CDATA[<h1 id="DTOJ-5769"><a href="#DTOJ-5769" class="headerlink" title="DTOJ 5769"></a>DTOJ 5769</h1><p>水一篇题解</p><p>首先比较容易想到 $dp$ , 因为任意一段绝对值不超过 $k$ ，所以白棋个数减黑棋个数要在 $[-k,k]$ 区间里，我们于是考虑把状态设为白棋减黑棋个数的最大值和最小值. </p><p>具体来说 $f_{i,j,a,b}$ 表示用了 $i$ 个白，$j$ 个黑， 白减黑最大值和最小值分别为 $a,b$ .</p><p>转移较显然，时间复杂度 $O(n^2k^2)$</p><p>因为 $|i-j|\in[-k,k]$ 所以可以优化到 $O(nk^3)$ ，$f_{i,j,a,b}$ 的 $j$ 表示原来的 $i-j$</p><p>继续优化，考虑将白棋看做向上一步，黑棋看做向右一步，问题即可转化为求到 $(n,m)$ 的方案数，其中路径上点 $\max{x-y}-\min{x-y}\leq k$， 即路径在 $x-y&#x3D;k-t$ 和  $x-y&#x3D;-t$  $(t\in{0,1,…,k})$ 两条直线之间. 显然类似卡塔兰数的方格路径计数，因为两条线，需要容斥，时间复杂度 $O(nk)$. </p><p>由于 $\max{x-y}-\min{x-y} &lt; k$ 的答案会被算多次，需要减去路径在 $x-y&#x3D;(k-1)-t$ 和  $x-y&#x3D;-t$  $(t\in{0,1,…,k-1})$ 两条直线之间的路径数，还有其他一些细节懒得写. </p>]]></content>
    
    
    
    <tags>
      
      <tag>dp</tag>
      
      <tag>组合</tag>
      
      <tag>容斥</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Hello World</title>
    <link href="/2022/10/22/hello-world/"/>
    <url>/2022/10/22/hello-world/</url>
    
    <content type="html"><![CDATA[<p>Welcome to <a href="https://hexo.io/">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues">GitHub</a>.</p><h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ hexo new <span class="hljs-string">&quot;My New Post&quot;</span><br></code></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/writing.html">Writing</a></p><h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ hexo server<br></code></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/server.html">Server</a></p><h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ hexo generate<br></code></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/generating.html">Generating</a></p><h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ hexo deploy<br></code></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/one-command-deployment.html">Deployment</a></p>]]></content>
    
    
    
  </entry>
  
  
  
  
</search>
